{"is_source_file": true, "format": "Python", "description": "This file contains utility functions for integrating MongoDB with a FastAPI application, including database retrieval, ping, and lifecycle management.", "external_files": ["app.core.config"], "external_methods": ["Settings.mongodb_uri", "Settings.mongodb_dbname", "Settings.mongodb_tls"], "published": ["get_db", "mongo_ping", "register_mongo_lifecycle"], "classes": [], "methods": [{"name": "_is_enabled", "description": "Checks if MongoDB is enabled based on settings (presence of URI)."}, {"name": "get_db", "description": "FastAPI dependency to retrieve the MongoDB database handle for a given request."}, {"name": "mongo_ping", "description": "Async function to ping MongoDB and verify connectivity."}, {"name": "register_mongo_lifecycle", "description": "Registers startup and shutdown handlers to manage MongoDB client lifecycle within a FastAPI app."}], "calls": ["getattr", "asyncio", "logger.info", "AsyncIOMotorClient", "client.get_database", "client.close"], "search-terms": ["MongoDB FastAPI integration", "MongoDB lifecycle", "MongoDB client registration", "async database retrieval", "MongoDB ping"], "state": 2, "file_id": 25, "knowledge_revision": 125, "git_revision": "b049abba99551385ad0de10f47dbfdc865197f95", "revision_history": [{"67": "327028bb0b258cf3c5c3f2aa75f441b582682632"}, {"125": "b049abba99551385ad0de10f47dbfdc865197f95"}], "ctags": [], "hash": "59498f3c8f65ddce37859765ed8df0b1", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/core/db.py"}