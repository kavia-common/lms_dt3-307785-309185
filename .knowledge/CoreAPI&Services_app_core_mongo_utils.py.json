{"is_source_file": true, "format": "Python", "description": "This Python source file provides utility functions for working with MongoDB documents, including converting string IDs to ObjectId, serializing documents for JSON responses, generating filters for soft deletion, and creating update payloads for soft deleting documents.", "external_files": ["bson.ObjectId", "pymongo.errors.InvalidId"], "external_methods": ["bson.ObjectId", "pymongo.errors.InvalidId"], "published": ["to_object_id", "serialize_mongo_doc", "not_deleted_filter", "soft_delete_update"], "classes": [], "methods": [{"name": "to_object_id", "description": "Converts a string representation to a BSON ObjectId, returning None if invalid or empty."}, {"name": "serialize_mongo_doc", "description": "Serializes a MongoDB document into a JSON-friendly dictionary, converting ObjectIds to strings and handling nested structures."}, {"name": "not_deleted_filter", "description": "Provides a filter to exclude documents that are marked as deleted via a 'deleted_at' timestamp."}, {"name": "soft_delete_update", "description": "Creates an update dictionary to soft delete a MongoDB document by setting 'deleted_at' and 'updated_at' timestamps."}], "calls": ["ObjectId(value)", "InvalidId", "dict(doc)", "isinstance(v, ObjectId)", "isinstance(v, dict)", "isinstance(v, list)"], "search-terms": ["mongo_utils", "ObjectId conversion", "MongoDB serialization", "soft delete", "pymongo"], "state": 2, "file_id": 39, "knowledge_revision": 102, "git_revision": "19710407e292302c797f1a8602379f1eacc3005b", "ctags": [], "hash": "ee77794e174c41c35f38e3af55e15964", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/core/mongo_utils.py", "revision_history": [{"102": "19710407e292302c797f1a8602379f1eacc3005b"}]}