{"is_source_file": true, "format": "Python", "description": "This file contains asynchronous functions for seeding a MongoDB database with sample data, including users, content, and assessments, using Motor (async MongoDB driver) and project-specific services. It also defines a CLI entry point to run the seed process.", "external_files": ["app.core.config", "app.services.assessments", "app.services.content", "app.services.users"], "external_methods": ["get_settings", "AssessmentsService._ensure_indexes", "ContentService._ensure_indexes", "UsersService._ensure_indexes"], "published": ["seed"], "classes": [], "methods": [{"name": "_utcnow", "description": "Returns the current UTC datetime."}, {"name": "_get_db", "description": "Creates and returns a MongoDB database client instance."}, {"name": "_ensure_indexes", "description": "Ensures indexes are created on collections for performance and stability."}, {"name": "_upsert_user", "description": "Insert or update a user document based on unique email."}, {"name": "_upsert_content", "description": "Insert or update a content document based on slug."}, {"name": "_upsert_assessment", "description": "Insert or update an assessment based on a deterministic composite key."}, {"name": "_counts", "description": "Retrieves counts of documents in collections, overall and seed-tagged."}, {"name": "seed", "description": "Main public async function that seeds the database with sample data and returns counts."}, {"name": "_main_async", "description": "Asynchronous main function that runs seed and prints results."}, {"name": "main", "description": "Synchronous entry point that runs the async main function via asyncio.run."}], "calls": ["get_settings", "AsyncIOMotorClient", "client.get_database", "UsersService(db)._ensure_indexes", "ContentService(db)._ensure_indexes", "AssessmentsService(db)._ensure_indexes", "_utcnow", "db[UsersService.collection_name].update_one", "db[ContentService.collection_name].update_one", "db[AssessmentsService.collection_name].update_one", "db[UsersService.collection_name].count_documents", "db[ContentService.collection_name].count_documents", "db[AssessmentsService.collection_name].count_documents", "asyncio.run"], "search-terms": ["seed_async", "mongo seed", "evaluate seed function", "async database seed", "mongodb seed script", "assessment, content, user seed"], "state": 2, "file_id": 41, "knowledge_revision": 116, "git_revision": "99820cf292b8e50fe34749ddd02bee0c28672dfc", "ctags": [], "hash": "e176a761c63198a2e186cc7659be54fe", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/scripts/seed.py", "revision_history": [{"116": "99820cf292b8e50fe34749ddd02bee0c28672dfc"}]}