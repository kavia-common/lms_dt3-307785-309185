{"is_source_file": true, "format": "Python", "description": "Integration tests for FastAPI application, specifically testing RBAC (Role-Based Access Control) routes and behaviors. The tests verify authorization responses (401, 403, 200) for various user roles using fastapi.testclient and dependency override techniques.", "external_files": ["app.api.deps", "app.main"], "external_methods": ["app.api.deps.Principal", "app.api.deps.Role", "app.api.deps.get_current_principal", "app.main.app"], "published": [], "classes": [], "methods": [{"name": "_principal_with_roles", "description": "Creates a minimal Principal object with specified roles for testing purposes."}, {"name": "_override_principal", "description": "Returns a dependency override callable that supplies the specified Principal instance."}, {"name": "client", "description": "Fixture that provides a clean TestClient instance with no dependency overrides."}, {"name": "client_readonly", "description": "Fixture that provides a TestClient authenticated as a READ-only (LEARNER) principal."}, {"name": "client_admin", "description": "Fixture that provides a TestClient authenticated as an ADMIN principal."}, {"name": "test_unauthenticated_requests_to_list_endpoints_return_401", "description": "Test that unauthenticated requests to list endpoints return 401 Unauthorized."}, {"name": "test_readonly_principal_cannot_create_resources_returns_403", "description": "Test that a READ-only principal cannot create resources, expecting 403 Forbidden."}, {"name": "test_readonly_principal_cannot_delete_resources_returns_403", "description": "Test that a READ-only principal cannot delete resources, expecting 403 Forbidden."}, {"name": "test_admin_principal_can_access_all_users_content_assessments_endpoints_returns_200", "description": "Test that ADMIN principal can access all endpoints with appropriate methods, expecting 200 OK."}], "calls": ["app.api.deps.get_current_principal", "app.main.app", "pytest.fixture", "pytest.mark.parametrize", "TestClient", "client.get", "client.post", "client.delete"], "search-terms": ["RBAC", "test_app_integration_rbac_routes", "TestClient", "pytest", "get_current_principal", "Principal", "Role", "dependency_overrides"], "state": 2, "file_id": 17, "knowledge_revision": 46, "git_revision": "ac13de55d1f3f3370c1caab346fad8c4437cc3d3", "ctags": [], "hash": "b09f9563c9862eb86bde34f840e5530f", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/tests/test_app_integration_rbac_routes.py", "revision_history": [{"46": "ac13de55d1f3f3370c1caab346fad8c4437cc3d3"}]}