{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for authentication endpoints in a FastAPI application, specifically testing stub authentication behavior and required headers.", "external_files": ["fastapi.testclient.TestClient", "app.core.config.clear_settings_cache", "app.main.create_app"], "external_methods": ["clear_settings_cache", "create_app"], "published": [], "classes": [], "methods": [{"name": "test_auth_debug_returns_principal_when_stub_enabled", "description": "Tests that when the AUTH_STUB environment variable is enabled, the /auth/debug endpoint returns the correct principal information."}, {"name": "test_auth_debug_requires_bearer_when_stub_disabled", "description": "Tests that when the AUTH_STUB environment variable is disabled, the /auth/debug endpoint requires a bearer token and responds with 401 Unauthorized if missing."}], "calls": ["clear_settings_cache", "create_app", "client.get", "resp.json", "resp.status_code", "resp.headers.get"], "search-terms": ["fastapi.testclient", "auth stub", "/auth/debug", "TestClient", "test_auth"], "state": 2, "file_id": 24, "knowledge_revision": 147, "git_revision": "749667ff558d78ec1efbd0cd6de8e8a3140a3aa3", "revision_history": [{"61": "a50d2abeb189157a632144b275fbaad11de74f70"}, {"130": "2d7dee753c35a3dfcfb294158664118376c714db"}, {"147": "749667ff558d78ec1efbd0cd6de8e8a3140a3aa3"}], "ctags": [], "hash": "6c543cea204f8fcc556ec4da01910ea5", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/tests/test_auth_stub.py"}