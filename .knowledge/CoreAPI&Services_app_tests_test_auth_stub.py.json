{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the authentication stub functionality in a FastAPI application, specifically testing behavior when the stub is enabled or disabled.", "external_files": ["app.core.config", "app.main", "fastapi.testclient"], "external_methods": ["clear_settings_cache", "create_app"], "published": [], "classes": [], "methods": [{"name": "test_auth_debug_returns_principal_when_stub_enabled", "description": "Tests that the '/auth/debug' endpoint returns correct principal information when the AUTH_STUB environment variable is enabled."}, {"name": "test_auth_debug_returns_501_when_stub_disabled", "description": "Tests that the '/auth/debug' endpoint returns a 501 status code when the AUTH_STUB environment variable is disabled."}], "calls": ["monkeypatch.setenv", "clear_settings_cache", "create_app", "TestClient", "client.get", "resp.json"], "search-terms": ["test_auth_debug", "AuthStub", "FastAPI test", "TestClient", "auth/debug endpoint", "AUTH_STUB environment variable", "monkeypatch", "unit test"], "state": 2, "file_id": 24, "knowledge_revision": 130, "git_revision": "2d7dee753c35a3dfcfb294158664118376c714db", "revision_history": [{"61": "a50d2abeb189157a632144b275fbaad11de74f70"}, {"130": "2d7dee753c35a3dfcfb294158664118376c714db"}], "ctags": [], "hash": "2a68fcd0aa79e88c6f897bfa32deb0b0", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/tests/test_auth_stub.py"}