{"is_source_file": true, "format": "Python", "description": "This file contains pytest-based unit tests for JWT authentication/validation functionality in a FastAPI application. It tests token validation, protected route access, and appropriate error handling for missing or invalid tokens.", "external_files": ["fastapi", "fastapi.security", "fastapi.testclient", "pytest"], "external_methods": ["pytest.fixture", "client.get", "resp.status_code", "resp.json"], "published": [], "classes": [{"name": "AuthContext", "description": "A dataclass representing the authenticated user context with subject and roles."}], "methods": [{"name": "_validate_bearer_token", "description": "Validates a bearer token, raising HTTP 401 exceptions if missing or invalid, and returning an AuthContext for valid tokens."}, {"name": "_build_stub_app", "description": "Creates a minimal FastAPI app with a protected endpoint for testing."}], "calls": ["Depends", "HTTPException", "status.HTTP_401_UNAUTHORIZED", "TestClient", "_build_stub_app", "client.get"], "search-terms": ["JWT", "fastapi", "test_jwt_auth", "stub app", "protected endpoint"], "state": 2, "file_id": 6, "knowledge_revision": 21, "git_revision": "", "ctags": [], "hash": "638bcb5544b1850196b369ec178887f4", "format-version": 4, "code-base-name": "CoreAPI&Services", "filename": "CoreAPI&Services/app/tests/test_jwt_auth.py", "revision_history": [{"21": ""}]}