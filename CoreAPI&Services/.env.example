# Core API & Services - Example environment variables
# Copy to .env for local development (do not commit real secrets).

# App
APP_ENV=development
HOST=0.0.0.0
PORT=3001
LOG_LEVEL=INFO
LOG_FORMAT=auto
TRUST_PROXY=false

# CORS
# Supports CSV: https://example.com, http://localhost:3000
# Or JSON array: ["https://example.com","http://localhost:3000"]
ALLOWED_ORIGINS=http://localhost:3000
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_MAX_AGE=3600

# MongoDB (optional; leave unset for unit tests)
MONGODB_URI=
MONGODB_DBNAME=lms
MONGODB_TLS=false

# URLs (optional)
SITE_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000
WS_URL=ws://localhost:3001

# Auth / OIDC
# When true, the API uses header-based stub auth (useful for local dev and unit tests).
# When false, the API requires Authorization: Bearer <access_token> and validates JWT against JWKS.
AUTH_STUB=true

# OIDC/JWT validation configuration (required when AUTH_STUB=false)
# Example (Microsoft Entra ID):
#   OIDC_ISSUER=https://login.microsoftonline.com/<tenant-id>/v2.0
#   OIDC_AUDIENCE=api://<app-id-uri>   (optional; if empty, aud validation is disabled)
#   OIDC_JWKS_URI=https://login.microsoftonline.com/<tenant-id>/discovery/v2.0/keys
OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_AUDIENCE=
OIDC_JWKS_URI=
# Algorithms allowed for JWT signature verification.
# Usually RS256 for Entra ID.
OIDC_ALGORITHMS=RS256

# Misc
REQUEST_TIMEOUT_MS=30000
RATE_LIMIT_WINDOW_S=60
RATE_LIMIT_MAX=100
COOKIE_DOMAIN=
